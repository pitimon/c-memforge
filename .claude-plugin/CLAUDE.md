# MemForge Client Plugin

Persistent semantic memory for Claude Code, powered by the MemForge SaaS platform.

## MCP Tools Available

This plugin provides 14 MCP tools for semantic search and memory management:

### Search Tools
- `mem_semantic_search` - Hybrid search (vector + FTS)
- `mem_hybrid_search` - Hybrid search with RRF ranking
- `mem_vector_search` - Pure vector/embedding search
- `mem_search` - Full-text search

### Observation Tools
- `mem_semantic_get` - Get observation by ID
- `mem_semantic_recent` - Get recent observations
- `mem_timeline` - Get context around an observation
- `mem_get_observations` - Batch fetch observations by IDs

### Entity Tools
- `mem_entity_lookup` - Find triplets by entity name
- `mem_triplets_query` - Query SPO triplets with filters

### Snapshot Tools
- `mem_snapshot_create` - Create memory snapshot
- `mem_snapshot_list` - List all snapshots
- `mem_snapshot_restore` - Restore from snapshot
- `mem_snapshot_delete` - Delete a snapshot

## Sync Manager

Auto-manages the database watcher process via session hooks.

### Commands
```bash
bun src/sync/sync-manager.ts start   # Start watcher (detached, PID tracked)
bun src/sync/sync-manager.ts stop    # Stop watcher (SIGTERM + cleanup)
bun src/sync/sync-manager.ts status  # Check if watcher is running
```

### Hooks
- **SessionStart**: Auto-starts watcher when Claude Code session begins
- **Stop**: Auto-stops watcher when session ends

### Architecture
- `sync-manager.ts` - Process lifecycle (PID file, detached spawn, log redirect)
- `db-watcher.ts` - Polls local SQLite, uses batch `syncBatch()` for efficiency
- `remote-sync.ts` - HTTP sync with disk-persistent `PendingQueue` for retry
- `pending-queue.ts` - Failed syncs persisted to `.sync-queue.json`, max 5 retries

### Key Files
| File | Purpose |
|------|---------|
| `~/.claude-mem/memforge-sync.pid` | PID file (JSON: pid, startedAt, pluginRoot) |
| `~/.claude-mem/memforge-sync.log` | Watcher stdout/stderr log |
| `.sync-queue.json` | Persistent retry queue for failed syncs |

## Configuration

API key is read from `config.local.json` in the plugin root directory.
Run `bun run setup` to configure.

## Requirements

This plugin requires the `thedotmack/claude-mem` plugin to be installed first.


<claude-mem-context>
# Recent Activity

<!-- This section is auto-generated by claude-mem. Edit content outside the tags. -->

### Feb 6, 2026

| ID | Time | T | Title | Read |
|----|------|---|-------|------|
| #39203 | 6:55 AM | ðŸ”µ | C-memforge Plugin Documentation Defines 14 MCP Tools | ~434 |
</claude-mem-context>